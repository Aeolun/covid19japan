<!DOCTYPE HTML>
<html lang="en">
<head>

  <!-- Warning: Ugly code lies ahead -->


  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, minimal-ui">
  <title>Coronavirus Disease (COVID-19) Japan Tracker</title>
  <link href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700,700i,800&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="static/css/styles.css">

  <link
    rel="icon"
    type="image/png"
    href="https://covid19japan.com/static/favicon.png"
  />
  <meta
    name="description"
    content="Follow daily updates of the Coronavirus COVID-19 through Japan"
  />
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:url" content="https://covid19japan.com/" />
  <meta name="twitter:title" content="Coronavirus Japan Tracker" />

  <meta
    name="twitter:description"
    content="Follow daily updates of the Coronavirus COVID-19 through Japan"
  />
  <meta property="og:title" content="Coronavirus Japan Tracker" />
  <meta property="og:type" content="website" />
  <meta property="og:url" content="https://covid19japan.com/" />
  <meta
    property="og:image"
    content="https://covid19japan.com/static/map.jpg"
  />
  <meta
    property="og:description"
    content="Follow daily updates of the Coronavirus COVID-19 through Japan"
  />
</head>
<body>

  <section id="kpi">
    <table>
      <tr class="kpi-metrics">
        <td id="kpi-confirmed"><div class="lds-dual-ring"></div></td>
        <td id="kpi-recovered"><div class="lds-dual-ring"></div></td>
        <td id="kpi-deceased"><div class="lds-dual-ring"></div></td>
      </tr>
      <tr class="kpi-labels">
        <td data-ja="感染者数">Confirmed</td>
        <td data-ja="回復者数">Recovered</td>
        <td data-ja="死亡者数">Deceased</td>
      </tr>
    </table>
  </section>

  <a name="map"></a>
  <div class="center-offset">
    <h4 data-ja="ウイルス感染マップ">Outbreak Map</h4>
  </div>
  <section id="map-legend">
    <div><span class="one">▉</span> <span data-ja="1-10 件">1-10 cases</span></div>
    <div><span class="two">▉</span> <span data-ja="11-25 件">11-25 cases</span></div>
    <div><span class="three">▉</span> <span data-ja="26-50 件">26-50 cases</span></div>
    <div><span class="four">▉</span> <span data-ja="51+ 件">51+ cases</span></div>
  </section>
  <div id="map-container"></div>

  <footer>
    Built by <a href="https://twitter.com/reustle" target="_blank">Shane Reustle</a> and <a href="https://jiahuizhou.design/" target="_blank">Jiahui Zhou</a><br/><br/>
    <a href="https://github.com/reustle/covid19japan">Contribute to this page on GitHub</a>
  </footer>

  <!-- JS -->
  <script src="https://api.mapbox.com/mapbox-gl-js/v0.53.1/mapbox-gl.js"></script>
  <link href="https://api.mapbox.com/mapbox-gl-js/v0.53.1/mapbox-gl.css" rel="stylesheet" />
  <script src="https://cdn.jsdelivr.net/npm/moment@2.24.0/moment.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js@2.8.0"></script>
  <script src="https://cdn.jsdelivr.net/npm/lodash@4.17.15/lodash.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/drive-db@5.0.3/index.min.js"></script>
  <script src="static/main.js"></script>
  <script>
    (function(){
      drawMap()

      // TODO This should load the data in parallel
      map.once('style.load', function(e) {
        loadPrefectureData(function(prefData){
          ddb.prefectures = prefData
          
          ddb.totals = calculateTotals(prefData)

          drawKpis(ddb.totals)
          drawPageTitleCount(ddb.totals.confirmed)
          drawMapPrefectures(ddb.prefectures)
        })
      })
    })()
  </script>

  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-2580539-41"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-2580539-41');
  </script>

</body>
</html>
